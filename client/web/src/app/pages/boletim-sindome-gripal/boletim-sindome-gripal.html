<div class="main-container">
  <app-header headerTitle="Boltim Sindrome Gripal">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24"
      fill="currentColor"
      class="size-6"
    >
      <path
        fill-rule="evenodd"
        d="M5.625 1.5H9a3.75 3.75 0 0 1 3.75 3.75v1.875c0 1.036.84 1.875 1.875 1.875H16.5a3.75 3.75 0 0 1 3.75 3.75v7.875c0 1.035-.84 1.875-1.875 1.875H5.625a1.875 1.875 0 0 1-1.875-1.875V3.375c0-1.036.84-1.875 1.875-1.875ZM9.75 14.25a.75.75 0 0 0 0 1.5H15a.75.75 0 0 0 0-1.5H9.75Z"
        clip-rule="evenodd"
      />
      <path
        d="M14.25 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 16.5 7.5h-1.875a.375.375 0 0 1-.375-.375V5.25Z"
      />
    </svg>
  </app-header>
  <div class="body-wrapper">
    <app-sidebar></app-sidebar>
    <div class="content-wrapper">
      <div class="body-container">
        <p-breadcrumb [model]="items">
          <ng-template #item let-item>
            @if(item.route){
            <a [routerLink]="item.route">
              <span class="text-primary font-semibold">{{ item.label }}</span>
            </a>
            } @else {
            <a [href]="item.url">
              <span class="text-color">{{ item.label }}</span>
            </a>
            }
          </ng-template>
        </p-breadcrumb>
        <div class="content-container">
          <div class="mobile-content-wrapper">
            @if(boletins){ @for ( boletim of boletins; track boletim?.['id']){
            <app-mobile-card-item
              [item]="boletim"
              [routerLink]="[boletim?.['id']]"
            >
              <div class="mobile-card-content">
                <h1>Boletim {{ boletim?.['criado_em']| date:'shortDate' }}</h1>
                <span class="usuario-info-container">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    class="size-6"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M18.685 19.097A9.723 9.723 0 0 0 21.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 0 0 3.065 7.097A9.716 9.716 0 0 0 12 21.75a9.716 9.716 0 0 0 6.685-2.653Zm-12.54-1.285A7.486 7.486 0 0 1 12 15a7.486 7.486 0 0 1 5.855 2.812A8.224 8.224 0 0 1 12 20.25a8.224 8.224 0 0 1-5.855-2.438ZM15.75 9a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"
                      clip-rule="evenodd"
                    />
                  </svg>
                  <p>{{boletim?.['usuario']?.['nome']}}</p>
                </span>
                <span class="footer-card-container">
                  <small>
                    Enviado em {{boletim?.['criado_em']|date:'shortDate'}} as
                    {{boletim?.['criado_em']|date:'shortTime'}}
                  </small>
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    class="size-6"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z"
                      clip-rule="evenodd"
                    />
                  </svg>
                </span>
              </div>
            </app-mobile-card-item>

            } } @else {
            <app-mobile-card-item styleCard="empty">
              <div class="mobile-card-item-empty">
                <span class="empty-info-container">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    class="size-6"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M2.625 6.75a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm4.875 0A.75.75 0 0 1 8.25 6h12a.75.75 0 0 1 0 1.5h-12a.75.75 0 0 1-.75-.75ZM2.625 12a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0ZM7.5 12a.75.75 0 0 1 .75-.75h12a.75.75 0 0 1 0 1.5h-12A.75.75 0 0 1 7.5 12Zm-4.875 5.25a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm4.875 0a.75.75 0 0 1 .75-.75h12a.75.75 0 0 1 0 1.5h-12a.75.75 0 0 1-.75-.75Z"
                      clip-rule="evenodd"
                    />
                  </svg>
                  <p>Nenhum item cadastrado</p>
                </span>
              </div>
            </app-mobile-card-item>
            }
          </div>
          <div class="lg:flex w-[50rem] justify-end hidden">
            <p-button label="Nova Ficha" (onClick)="showNovaFicha()"
              ><svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="size-6"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M12 4.5v15m7.5-7.5h-15"
                />
              </svg>
            </p-button>
          </div>
          <p-dialog
            [(visible)]="novaFichaVisible"
            [modal]="true"
            styleClass="!border-0"
          >
            <ng-template #headless>
              <div
                class="flex w-full h-full p-7 rounded-t-lg bg-gradient-to-r from-[#4AC1A8] to-[#2BA7DB] gap-4"
              >
                <div class="flex justify-center items-center">
                  <div
                    class="flex bg-white/32 h-12 w-12 rounded-lg items-center justify-center lg:h-12 lg:w-12"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 24 24"
                      fill="currentColor"
                      class="size-6 fill-white"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M5.625 1.5H9a3.75 3.75 0 0 1 3.75 3.75v1.875c0 1.036.84 1.875 1.875 1.875H16.5a3.75 3.75 0 0 1 3.75 3.75v7.875c0 1.035-.84 1.875-1.875 1.875H5.625a1.875 1.875 0 0 1-1.875-1.875V3.375c0-1.036.84-1.875 1.875-1.875ZM12.75 12a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V18a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V12Z"
                        clip-rule="evenodd"
                      />
                      <path
                        d="M14.25 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 16.5 7.5h-1.875a.375.375 0 0 1-.375-.375V5.25Z"
                      />
                    </svg>
                  </div>
                </div>
                <div class="flex flex-col">
                  <h1 class="text-2xl font-bold text-white">
                    Boletim da Síndrome Gripal
                  </h1>
                  <small class="text-white font-semibold"
                    >Preenchimento dos dados do boletim</small
                  >
                </div>
              </div>
              <div class="flex flex-col w-full h-full overflow-auto">
                <form
                  action=""
                  class="form-wrapper"
                  [formGroup]="newBoletimForm"
                >
                  <div class="section-wrapper">
                    <div class="section-title">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24"
                        fill="currentColor"
                        class="size-6"
                      >
                        <path
                          fill-rule="evenodd"
                          d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"
                          clip-rule="evenodd"
                        />
                      </svg>
                      <h1>Informações Gerais</h1>
                    </div>
                    <div class="divider"></div>
                    <div class="section-field-group">
                      <div class="field">
                        <label for="">Unidade</label>
                        <input
                          type="text"
                          pInputText
                          disabled="true"
                          [value]="usuario?.unidade?.nome"
                        />
                      </div>
                      <div class="field">
                        <label for="">Responsavel Pelo Preenchimento </label>
                        <input
                          type="text"
                          pInputText
                          disabled="true"
                          [value]="usuario?.nome"
                        />
                      </div>
                      <div class="field">
                        <label for="">Data Referente </label>
                        <p-datepicker
                          formControlName="referente_ao_dia"
                          dateFormat="dd/mm/yy"
                        />
                      </div>
                    </div>
                  </div>
                  <div class="section-wrapper">
                    <div class="section-title">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24"
                        fill="currentColor"
                        class="size-6"
                      >
                        <path
                          fill-rule="evenodd"
                          d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"
                          clip-rule="evenodd"
                        />
                      </svg>
                      <h1>Atendimentos</h1>
                    </div>
                    <div class="divider"></div>
                    <div class="section-field-group">
                      <div class="field">
                        <label for=""
                          >Total de Atendimentos SD <strong>COM</strong> Queixa
                          Gripal</label
                        >
                        <input
                          type="text"
                          pInputText
                          formControlName="total_atendimentos_sd_com_queixa_gripal"
                        />
                      </div>
                      <div class="field">
                        <label for=""
                          >Total de Atendimentos SD <strong>SEM</strong> Queixa
                          Gripal</label
                        >
                        <input
                          type="text"
                          pInputText
                          formControlName="total_atendimentos_sd_sem_queixa_gripal"
                        />
                      </div>
                      <div class="field">
                        <label for=""
                          >Total de Atendimentos SN <strong>COM</strong> Queixa
                          Gripal</label
                        >
                        <input
                          type="text"
                          pInputText
                          formControlName="total_atendimentos_sn_com_queixa_gripal"
                        />
                      </div>
                      <div class="field">
                        <label for=""
                          >Total de Atendimentos SN <strong>SEM</strong> Queixa
                          Gripal</label
                        >
                        <input
                          type="text"
                          pInputText
                          formControlName="total_atendimentos_sn_sem_queixa_gripal"
                        />
                      </div>
                    </div>
                  </div>
                  <div class="section-wrapper">
                    <div class="section-title">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24"
                        fill="currentColor"
                        class="size-6"
                      >
                        <path
                          fill-rule="evenodd"
                          d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"
                          clip-rule="evenodd"
                        />
                      </svg>
                      <h1>Internações</h1>
                    </div>
                    <div class="divider"></div>
                    <div class="section-field-group">
                      <div class="field">
                        <label for=""
                          >Total de Internações Após Atendimento na Urgência
                          <strong>SEM</strong> Relação a Queixa Gripal</label
                        >
                        <input
                          type="text"
                          pInputText
                          formControlName="total_internacoes_apos_atendimento_urgencia_com_queixa_gripal"
                        />
                      </div>
                      <div class="field">
                        <label for=""
                          >Total de Internações Após Atendimento na Urgência
                          <strong>COM</strong> Relação a Queixa Gripal</label
                        >
                        <input
                          type="text"
                          pInputText
                          formControlName="total_internacoes_apos_atendimento_urgencia_sem_queixa_gripal"
                        />
                      </div>
                    </div>
                  </div>
                  <div class="section-wrapper">
                    <div class="section-title">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 24 24"
                        fill="currentColor"
                        class="size-6"
                      >
                        <path
                          fill-rule="evenodd"
                          d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"
                          clip-rule="evenodd"
                        />
                      </svg>
                      <h1>Desfechos</h1>
                    </div>
                    <div class="divider"></div>
                    <div class="section-field-group">
                      <div class="field">
                        <label for="">Total de Obitos</label>
                        <input
                          type="text"
                          pInputText
                          formControlName="total_obitos"
                        />
                      </div>
                      <div class="field">
                        <label for="">Total de Transferências</label>
                        <input
                          type="text"
                          pInputText
                          formControlName="total_transferencias"
                        />
                      </div>
                    </div>
                  </div>
                  <div class="buttons-footer-wrapper">
                    <p-button
                      [styleClass]="'w-80 h-12'"
                      variant="outlined"
                      (click)="closeNovaFicha()"
                    >
                      Cancelar
                    </p-button>

                    <p-button
                      class="button-send"
                      [styleClass]="'w-80 h-12'"
                      (click)="submitNovaFicha()"
                      severity="success"
                    >
                      Enviar
                    </p-button>
                  </div>
                </form>
              </div>
            </ng-template>
          </p-dialog>
          @if(boletins){
          <p-table [value]="boletins" size="large" class="hidden lg:flex" d>
            <ng-template #header>
              <tr>
                <th>Nome</th>
                <th>Enviado Por</th>
                <th>Data de Envio</th>
              </tr>
            </ng-template>
            <ng-template #body let-boletim>
              <tr [routerLink]="['/boletim/sindrome-gripal',boletim.id]">
                <td>Boletim {{boletim.referente_ao_dia|date:'shortDate'}}</td>
                <td class="flex gap-2">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    class="size-6"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M18.685 19.097A9.723 9.723 0 0 0 21.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 0 0 3.065 7.097A9.716 9.716 0 0 0 12 21.75a9.716 9.716 0 0 0 6.685-2.653Zm-12.54-1.285A7.486 7.486 0 0 1 12 15a7.486 7.486 0 0 1 5.855 2.812A8.224 8.224 0 0 1 12 20.25a8.224 8.224 0 0 1-5.855-2.438ZM15.75 9a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"
                      clip-rule="evenodd"
                    />
                  </svg>
                  {{boletim.usuario.nome}}
                </td>
                <td>{{boletim.criado_em|date}}</td>
              </tr>
            </ng-template>
          </p-table>

          } @else {
          <p>Não encontrado nenhuma ficha cadastrada</p>
          }
        </div>
      </div>
    </div>
  </div>
</div>
